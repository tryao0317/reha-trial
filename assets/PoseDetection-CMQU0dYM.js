import{r as i,j as d}from"./index-BK7isfUs.js";const f=({setDebugInfo:c,setError:r})=>{const n=i.useRef(null),o=i.useRef(null),[l,u]=i.useState(!1),a=i.useCallback(e=>{c&&c(t=>[...t,`[PoseDetection] ${e}`])},[c]);return i.useEffect(()=>{a("Component mounted.");const e=document.createElement("video");return e.autoplay=!0,e.playsInline=!0,e.muted=!0,e.style.width="100%",e.style.height="100%",e.style.objectFit="cover",e.style.position="absolute",e.style.top="0",e.style.left="0",o.current?(o.current.innerHTML="",o.current.appendChild(e),n.current=e,a("Video element created and added to DOM."),u(!0)):(a("Container ref not available on mount."),r&&r("初期化エラー: ビデオコンテナが見つかりません。")),()=>{n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(t=>t.stop()),a("Component unmounted.")}},[a,r]),i.useEffect(()=>{if(!l)return;(async()=>{if(a("Starting camera initialization..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){r&&r("エラー: お使いのブラウザはカメラアクセスをサポートしていません。"),a("MediaDevices API not supported.");return}try{const t=await navigator.mediaDevices.getUserMedia({video:!0});n.current?(n.current.srcObject=t,await n.current.play(),a("Camera stream started successfully.")):(r&&r("エラー: ビデオ要素が準備できていません。"),a("Video element not ready for stream."))}catch(t){console.error("Camera access error:",t);let s="カメラアクセスに失敗しました。";t.name==="NotAllowedError"?s="カメラの使用が許可されませんでした。ブラウザの設定を確認してください。":t.name==="NotFoundError"?s="カメラが見つかりませんでした。接続を確認してください。":t.name==="NotReadableError"&&(s="カメラが既に使用中か、ハードウェアエラーが発生しました。"),r&&r(s),a(`Camera error: ${t.name} - ${t.message}`)}})()},[l,a,r]),d.jsx("div",{ref:o,className:"relative w-full bg-black",style:{paddingTop:"75%"}})};export{f as default};
