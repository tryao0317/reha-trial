import{f as A,r as g,j as e,C as j,a as y,b as f,c as w,e as _,A as k}from"./index-BvKj1L6s.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],b=A("circle-alert",I);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],S=A("circle-check-big",O),J=({poseData:a,targetPose:P})=>{const[N,p]=g.useState([]),[c,v]=g.useState(0),[h,x]=g.useState("waiting"),u={leftElbow:{min:110,max:140,ideal:125},rightElbow:{min:110,max:140,ideal:125},leftKnee:{min:150,max:180,ideal:165},rightKnee:{min:150,max:180,ideal:165},leftShoulder:{min:80,max:120,ideal:100},rightShoulder:{min:80,max:120,ideal:100}},$={leftElbow:"左肘",rightElbow:"右肘",leftKnee:"左膝",rightKnee:"右膝",leftShoulder:"左肩",rightShoulder:"右肩"},C=t=>{const s=[];let l=0;const i=Object.keys(u).length;Object.entries(t).forEach(([o,n])=>{const r=u[o],m=$[o];!r||!m||(n>=r.min&&n<=r.max?(l++,s.push({type:"success",message:`${m}の角度が適切です (${n.toFixed(1)}°)`,joint:o})):n<r.min?s.push({type:"warning",message:`${m}をもう少し伸ばしてください (現在: ${n.toFixed(1)}°, 目標: ${r.min}-${r.max}°)`,joint:o}):s.push({type:"warning",message:`${m}をもう少し曲げてください (現在: ${n.toFixed(1)}°, 目標: ${r.min}-${r.max}°)`,joint:o}))});const d=l/i*100;v(d),p(s),d>=80?x("good"):d>=60?x("warning"):x("error")};g.useEffect(()=>{a&&a.jointAngles?C(a.jointAngles):(x("waiting"),p([]),v(0))},[a]);const E=()=>{switch(h){case"good":return e.jsx(S,{className:"h-5 w-5 text-green-600"});case"warning":return e.jsx(b,{className:"h-5 w-5 text-yellow-600"});case"error":return e.jsx(b,{className:"h-5 w-5 text-red-600"});default:return e.jsx(k,{className:"h-5 w-5 text-gray-400"})}},F=()=>{switch(h){case"good":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},K=()=>{switch(h){case"good":return"素晴らしい姿勢です！";case"warning":return"姿勢を調整してください";case"error":return"姿勢の改善が必要です";default:return"姿勢を検出中..."}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(j,{children:[e.jsx(y,{className:"pb-3",children:e.jsxs(f,{className:"flex items-center gap-2 text-lg",children:[E(),"姿勢評価"]})}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${F()}`,children:e.jsx("p",{className:"font-medium",children:K()})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"正確性スコア"}),e.jsxs(_,{variant:c>=80?"default":c>=60?"secondary":"destructive",children:[c.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${c>=80?"bg-green-600":c>=60?"bg-yellow-600":"bg-red-600"}`,style:{width:`${c}%`}})})]})})]}),e.jsxs(j,{children:[e.jsx(y,{className:"pb-3",children:e.jsx(f,{className:"text-lg",children:"詳細フィードバック"})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:N.length>0?N.map((t,s)=>e.jsx("div",{className:`p-3 rounded-lg text-sm ${t.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-yellow-50 text-yellow-800 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[t.type==="success"?e.jsx(S,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}):e.jsx(b,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:t.message})]})},s)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"姿勢データを待機中..."})]})})})]}),a&&a.jointAngles&&e.jsxs(j,{children:[e.jsx(y,{className:"pb-3",children:e.jsx(f,{className:"text-lg",children:"関節角度詳細"})}),e.jsx(w,{children:e.jsx("div",{className:"grid grid-cols-2 gap-3 text-sm",children:Object.entries(a.jointAngles).map(([t,s])=>{const l=$[t],i=u[t];if(!l||!i)return null;const d=s>=i.min&&s<=i.max;return e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-gray-50",children:[e.jsx("span",{className:"font-medium",children:l}),e.jsxs("span",{className:`font-mono ${d?"text-green-600":"text-red-600"}`,children:[s.toFixed(1),"°"]})]},t)})})})]})]})};export{J as default};
